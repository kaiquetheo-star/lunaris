:root {
  /* Tamanho exato da caixinha de 1 gato no Photopea */
  --frame-width: 500px; 
  --frame-height: 500px;
}

#lunaris-sprite {
  position: absolute;
  z-index: 5;
  bottom: 22%;
  left: 18%;
  
  /* Pega a medida da raiz */
  width: var(--frame-width);
  height: var(--frame-height);
  
  cursor: pointer;
  filter: drop-shadow(0 0 20px rgba(255, 0, 110, 0.5));
  transform-origin: bottom left;

  /* ISSO MATA QUALQUER DESLIZE "BIRULEIBE" */
  transition: none !important; 
}

/* =========================================
   ESTADOS PARADOS (FOTO ÚNICA)
========================================= */
.state-idle {
  background: url('lunaris_idle.png') no-repeat;
  background-size: var(--frame-width) var(--frame-height);
  background-position: 0 0;
}

.state-sleep {
  background: url('lunaris_sleep.png') no-repeat;
  background-size: var(--frame-width) var(--frame-height);
  background-position: 0 0;
}

/* =========================================
   ESTADOS ANIMADOS (SPRITE COM 6 FOTOS)
========================================= */
.state-lick {
  background: url('lunaris_lick.png') no-repeat;
  background-size: calc(var(--frame-width) * 6) var(--frame-height);
  /* A mágica do seu tutorial adaptada aqui: */
  animation: playSprite 1.2s steps(6) infinite;
}

.state-eat {
  background: url('lunaris_eat.png') no-repeat;
  background-size: calc(var(--frame-width) * 6) var(--frame-height);
  animation: playSprite 1.2s steps(6) infinite;
}

/* O MOTOR DO TUTORIAL (Adaptado para Horizontal) */
@keyframes playSprite {
  0% {
    background-position: 0 0;
  }
  100% {
    /* Multiplica a largura por 6 negativamente para puxar a fita pro lado */
    background-position: calc(var(--frame-width) * -6) 0;
  }
}

#game-container { position: relative; width: 100vw; height: 100dvh; } /* match body/html height */

#bottom-dock { position: absolute; bottom: 8%; left: 0; width: 100%; display: flex; flex-wrap: wrap; justify-content: center; gap: 10px; z-index: 20; pointer-events: none; } /* raised slightly for mobile browser UI */
/* TELA DE SPLASH */
#splash { position: fixed; inset: 0; z-index: 1000; background: #1a0530; display: flex; flex-direction: column; align-items: center; justify-content: center; transition: opacity 1s; }
#splash.hidden { opacity: 0; pointer-events: none; }
#logo { width: 250px; animation: pulse 2s infinite; }
#start-btn { margin-top: 40px; padding: 15px 40px; background: #ff006e; color: white; border: none; border-radius: 8px; font-weight: bold; cursor: pointer; box-shadow: 0 0 20px #ff006e; }

/* CAMADAS DO JOGO */
#game-container { position: relative; width: 100vw; height: 100dvh; } /* match body/html height */
#bg-room { position: absolute; inset: 0; z-index: 1; background: url('quarto_bg.png') center/cover; }

#room-darkness-overlay { position: absolute; inset: 0; background: #000; opacity: 0; pointer-events: none; transition: opacity 0.8s ease; z-index: 15; }

#switch-hitbox { z-index: 50; pointer-events: auto; }
#game-container.lights-out #room-darkness-overlay { opacity: 0.75; }

#lunaris-sprite {
  position: absolute; z-index: 5; bottom: 22%; left: 18%;
  width: var(--frame-width);
  height: var(--frame-height);
  filter: drop-shadow(0 0 20px rgba(255, 0, 110, 0.5));
  cursor: pointer;
  background-repeat: no-repeat;
  transform-origin: bottom left;
}

/* Fotos Paradas (1 quadro só) */
.state-idle { background-image: url('lunaris_idle.png'); background-size: cover; background-position: center; }
.state-sleep { background-image: url('lunaris_sleep.png'); background-size: cover; background-position: center; }

/* Animações (6 quadros) */
.state-lick {
  background-image: url('lunaris_lick.png');
  background-size: calc(var(--frame-width) * 6) var(--frame-height);
  animation: playSprite 1.2s steps(6) infinite;
}
.state-eat {
  background-image: url('lunaris_eat.png');
  background-size: calc(var(--frame-width) * 6) var(--frame-height);
  animation: playSprite 1.2s steps(6) infinite;
}

@keyframes playSprite {
  100% { background-position: calc(var(--frame-width) * -6) 0px; }
}

/* STATUS BARS NEON */
.status-container { position: absolute; top: 20px; left: 20px; z-index: 20; }
.stat-label { color: #fff; text-transform: uppercase; font-size: 12px; letter-spacing: 1px; text-shadow: 0 0 5px #ff006e; font-weight: bold; }
.bar-bg { width: 180px; height: 12px; background: rgba(0,0,0,0.5); border: 1px solid #ff006e; border-radius: 6px; margin-bottom: 10px; overflow: hidden; }
.bar { height: 100%; width: 100%; transition: width 0.5s; }
#hunger-bar { background: #ffff00; box-shadow: 0 0 10px #ffff00; }
#vibe-bar { background: #ff00ff; box-shadow: 0 0 10px #ff00ff; }
#sleep-bar { background: #00ffff; box-shadow: 0 0 10px #00ffff; }

#coins-display { position: absolute; top: 20px; right: 20px; color: #00ffff; font-weight: bold; font-size: 20px; text-shadow: 0 0 10px #00ffff; z-index: 20; background: rgba(0,0,0,0.6); padding: 5px 15px; border-radius: 10px; border: 1px solid #00ffff; }

/* DOCK INFERIOR (Mobile Friendly) */
#bottom-dock { position: absolute; bottom: 8%; left: 0; width: 100%; display: flex; flex-wrap: wrap; justify-content: center; gap: 10px; z-index: 20; pointer-events: none; } /* raised slightly for mobile browser UI */
#bottom-dock > * { pointer-events: auto; }
#mixer-dock { background: rgba(0,0,0,0.8); padding: 10px 20px; border-radius: 12px; border: 1px solid #ff006e; display: flex; gap: 15px; justify-content: center; width: 90%; max-width: 400px; }
.mixer-control { color: white; font-size: 14px; display: flex; align-items: center; gap: 5px; }
.mixer-control input { width: 70px; }
#santuario-btn { padding: 15px 40px; background: linear-gradient(135deg, #00ff00, #008800); color: black; border: none; border-radius: 12px; font-weight: bold; cursor: pointer; box-shadow: 0 0 15px #00ff00; font-size: 16px; letter-spacing: 1px; }

/* sleep button neon look */
#sleep-btn {
    padding: 15px 40px;
    background: linear-gradient(135deg, #3a005f, #00008b);
    color: white;
    border: none;
    border-radius: 12px;
    font-weight: bold;
    cursor: pointer;
    box-shadow: 0 0 15px #7f00ff;
    font-size: 16px;
    letter-spacing: 1px;
}

/* MODAL DO SANTUÁRIO (CORRIGIDO) */
#modal-overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.85); z-index: 3000; display: flex; justify-content: center; align-items: center; transition: opacity 0.3s; }
#modal-overlay.hidden { opacity: 0; pointer-events: none; }
#modal-content { background: #1a0530; width: 90%; max-width: 500px; max-height: 85vh; overflow-y: auto; border: 2px solid #ff00ff; border-radius: 15px; padding: 20px; position: relative; color: white; box-shadow: 0 0 40px rgba(255, 0, 255, 0.4); }
#close-modal { position: absolute; top: 10px; right: 10px; background: #ff006e; color: white; border: none; border-radius: 50%; width: 30px; height: 30px; font-weight: bold; cursor: pointer; box-shadow: 0 0 10px #ff006e; }
.modal-section { margin-bottom: 20px; padding: 15px; background: rgba(255,255,255,0.05); border-radius: 10px; border-left: 3px solid #00ffff; }
.shop-item { display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; padding-bottom: 10px; border-bottom: 1px solid rgba(255,255,255,0.1); }
.shop-item button { background: #00ffff; border: none; padding: 5px 15px; border-radius: 5px; font-weight: bold; cursor: pointer; }

/* EFEITO DE CHUVA */
/* Rain confined to window – adjust percentages to match the window artwork */
#rain-layer { position: absolute; top: 15%; left: 10%; width: 35%; height: 45%; overflow: hidden; border-radius: 5px; z-index: 2; pointer-events: none; opacity: 0.6; }
.rain-drop { position: absolute; width: 2px; height: 20px; background: rgba(255, 255, 255, 0.5); animation: fall linear infinite; }

/* ANIMAÇÕES */
@keyframes fall { 0% { transform: translateY(-100px); } 100% { transform: translateY(100vh); } }
@keyframes playSprite {
  100% { background-position: calc(var(--frame-width) * -6) 0px; }
}
@keyframes pulse { 0%, 100% { opacity: 0.8; } 50% { opacity: 1; } }

/* Responsividade Mobile */
@media (max-width: 600px) {
  #lunaris-sprite { transform: scale(0.55); bottom: 15%; left: 10%; }
  .status-container { transform: scale(0.8); transform-origin: top left; }
  #coins-display { transform: scale(0.8); transform-origin: top right; }
  #bottom-dock { transform: scale(0.85); transform-origin: bottom center; bottom: 2%; }
  .bar-bg { width: 120px; }
  #mixer-dock { flex-direction: column; gap: 10px; }
  .mixer-control input { width: 100%; }
}